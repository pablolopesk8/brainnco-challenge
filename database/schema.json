db.runCommand( {
    collMod: "users",
    validator: {
    }
}

db.createCollection("users", {
   validator: {
      $jsonSchema: {
         bsonType: "object",
         required: [ "githubId", "name", "username" ],
         properties: {
            githubId: {
               bsonType: "string",
               description: "string required"
            },
            name: {
               bsonType: "string",
               description: "string required"
            },
            username: {
               bsonType: "string",
               description: "string required"
            },
            repositories: {
                bsonType: "object",
                additionalProperties: true,
                properties: {
                    starred: {
                        bsonType: "array",
                        minItems: 0,
                        items: {
                            bsonType: "object",
                            additionalProperties: false,
                            required: [ "githubId", "name", "description", "url", "language" ],
                            properties: {
                                githubId: {
                                   bsonType: "string",
                                   description: "string required"
                                },
                                name: {
                                   bsonType: "string",
                                   description: "string required"
                                },
                                description: {
                                   bsonType: "string",
                                   description: "string required"
                                },
                                url: {
                                   bsonType: "string",
                                   description: "string required"
                                },
                                language: {
                                   bsonType: "string",
                                   description: "string required"
                                },
                                tags: {
                                    bsonType: "array",
                                    description: "array of tags for the repository. not required",
                                    minItems: 0,
                                    items: {
                                        bsonType: "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
         }
      }
   }
})

db.users.insert({
    name:"pablo2",
    githubId:"222222",
    username:"pablolopesk9",
    repositories: {
        test: "test",
        starred: [
            {
                githubId: 178589196,
                name: "challenge-development",
                description: "An description about the repository",
                url: "https://github.com/brainnco/challenge-development",
                language: "Javascript",
                tags:["node"]
            }
        ]
    }
})




https://www.mongodb.com/blog/post/mongodb-36-json-schema-validation-expressive-query-syntax
https://docs.mongodb.com/manual/reference/mongo-shell/
https://docs.mongodb.com/manual/core/schema-validation/#query-expressions
